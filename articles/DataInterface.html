<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Data Interface </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Data Interface ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/AllenNeuralDynamics/aind-harp-workshop-materials/blob/main/docs/articles/DataInterface.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="data-interface">Data Interface</h1>

<h2 id="collecting-data">Collecting data</h2>
<p>Use the last workflow from the previous section to collect data from your Harp Device. Additionally, if you have another Harp Behavior board and one Clock Synchronizer board, attempt to collect data from both devices simultaneously from two computers:</p>
<ul>
<li>Connect the <code>ClkOut</code> line from the Clock Synchronizer to the <code>ClkIn</code> line of the Harp Behavior board(s).</li>
<li>Connect a button/switch to one of the digital input lines of the Harp Behavior board(s).</li>
<li>Start the workflow and log all the data from the device to be analyzed later.</li>
</ul>
<h2 id="setting-up-the-python-environment">Setting up the python environment</h2>
<p>To analyze the data, you will need to install <a href="https://harp-tech.org/articles/python.html">harp-python package</a>.</p>
<pre><code class="lang-cmd">python -m venv .venv
.venv\Scripts\activate
pip install harp-python
</code></pre>
<h2 id="analyzing-single-register-data">Analyzing single register data</h2>
<p>A single register, in its rawest form, can be parsed as follows:</p>
<pre><code class="lang-python">import harp
file = &quot;./data/Behavior_32.bin&quot;
data = harp.read(file)
</code></pre>
<h2 id="analyzing-data-with-a-deviceyml-file">Analyzing data with a device.yml file</h2>
<p>If you have access to the <code>device.yml</code> file, you can parse the data as follows:</p>
<pre><code class="lang-python">import harp
device = harp.create_reader(&quot;./data/device.yml&quot;)
file = &quot;./data/Behavior_32.bin&quot;
data = device.DigitalInputState.read(file)
</code></pre>
<h2 id="analyzing-data-using-the-recommend-logging-spec">Analyzing data using the recommend logging spec</h2>
<p>If you follow the recommend logging spec covered at the end of last section, where the device.yml is in the same folder as all registers, you can parse the data as follows:</p>
<pre><code class="lang-python">device = harp.create_reader(&quot;./data/MyDevice.harp&quot;)
data = device.DigitalInputState.read()
</code></pre>
<h2 id="verify-that-both-behavior-boards-are-synchronizer">Verify that both behavior boards are synchronizer</h2>
<ul>
<li>Using the <code>DigitalInputState</code> register, parse the value of of the button/switch and verify if both boards are synchronized (i.e. report the same timestamp for the same button press).</li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/AllenNeuralDynamics/aind-harp-workshop-materials/blob/main/docs/articles/DataInterface.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
